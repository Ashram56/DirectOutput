<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>DirectOutput: Output controllers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="directoutputstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DirectOutput_Small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DirectOutput
   </div>
   <div id="projectbrief">DirectOutput framework for virtual pinball cabinets.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('outputcontrollers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Output controllers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="outputcontrollers_introduction"></a>
Introduction</h1>
<p>Output controllers are devices like the Ledwiz, PacLed64 or maybe your own Arduino or Raspberry PI invention controlling one or several physical outputs in a cabinet.</p>
<div class="image">
<img src="OutputControllerArchitecture.png" alt="OutputControllerArchitecture.png"/>
</div>
<p>By providing interfaces for the outputcontroller itself (IOutputController) and for the outputs of a outputcontroller (IOutput) it is possible to support different output controllers. Since all outputs of output controllers have to implement <em>IOutput</em> any configured toy can use any configured output of any output controller in the system.</p>
<h1><a class="anchor" id="outputcontrollers_builtincontrollers"></a>
Builtin output controllers</h1>
<p>A list of supported output controllers, including configuration examples and details, can be found on the following page: <a class="el" href="outputcontrollers_builtin.html">Built in OutputControllers</a>.</p>
<h1><a class="anchor" id="outputcontrollers_custom"></a>
Custom output controllers</h1>
<p>The <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework allows for the implementation of custom output controllers. This can be done trough scripting (see chapter on scripting) or the classes required for a custom outputcontroller can be integrated in the <a class="el" href="namespace_direct_output.html">DirectOutput</a> project.</p>
<h2><a class="anchor" id="outputcontrollers_interfaces"></a>
Interfaces for output controllers</h2>
<h3><a class="anchor" id="outputcontrollers_ioutputcontroller"></a>
IOutputController interface</h3>
<p>All output controllers need to implement the interface <em>IOutputController</em> to allow the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework to use the output controller. The IOutputController interface inherits the <em>INamedItem</em> interface, so the members of this interface have to be implemented as well.</p>
<p>A good starting point for your own implementation of a output controller is the abstract <em>OutputControllerBase</em> class. <em>OutputControllerBase</em> implements the <em>INamedItem</em> interface by inheriting <em>NamedItemBase</em> and also the <em>Outputs</em> property of the <em>IOutputController</em> interface. The simplest implemention of a output controller is probably the NullOutputController which is part of the framework.</p>
<p>Here is a short explanation of the interface members of <em>IOutputController</em>:</p>
<ul>
<li><b>string Name { get; set; }</b><br/>
Must set or get the name of the output controller. If the value of the name property is changed the <em>BeforeNameChange</em> and <em>AfterNameChange</em> events have to fire. <em>OutputControllerBase</em> does implement this member (inherited from <em>NamedItemBase</em>).</li>
<li><b>event EventHandler&lt;NameChangeEventArgs&gt; BeforeNameChange</b><br/>
This event has to be fired before the value of the <em>Name</em> property gets changeds. <em>OutputControlledBase</em> is implementing this event (inherited from <em>NamedItemBase</em>).</li>
<li><b>event EventHandler&lt;NameChangeEventArgs&gt; AfterNameChanged</b><br/>
Event has to be fired after the value of the <em>Name</em> property has changed. <em>OutputControlledBase</em> is implementing this event (inherited from <em>NamedItemBase</em>).</li>
</ul>
<ul>
<li><b>OutputList Outputs { get; set; }</b><br/>
This property contains the list of outputs (objects implementing IOutput) of a output controllers. Property is implement in the <em>OutputControllerBase</em> class, but can be overwritten.</li>
<li><b>void Init()</b><br/>
Method to initialize the output controller. This is the first method which is classed on a output controller after it has been instanciated.</li>
<li><b>void Update()</b><br/>
This method is called by the framework after data received from the outside world (typically PinMame) has been processed or after the UpdateTime has fired, to tell the output controller to update its physical outputs. If updating the physical outputs involves some time lag (very likely it does), consider doing the actual update in a separate thread and only to use this method to signal the updater thread, that data is ready.</li>
<li><b>void Finish()</b><br/>
Finish is the last method which is called on a output controller, before the object gets discared. Do all necessary cleanup work in this method and make sure all physical outputs are turned off.</li>
</ul>
<p>Please have a look at the class documentations for more information on the interface and its implementation.</p>
<h3><a class="anchor" id="outputcontrollers_ioutput"></a>
IOutput interface</h3>
<p>Output controllers implement the property <em>Outputs</em> which contains a list of the outputs of the output controller. This list can contain objects implement the <em>IOutput</em> interface.</p>
<p>The class <em>Output</em> is a full implementation of the <em>IOutput</em> interface and can be used directly for your output controller implementation or can be inherited to create your own extended <em>IOutput</em> implementation (e.g. having a additional output number property).</p>
<dl class="section remark"><dt>Remarks</dt><dd>Since the <em>OutputList</em> class used in the <em>Outputs</em> property of <em>IOutputController</em> will always return <em>IOutput</em> objects, you might need to cast these objects into your own type, before you can access your own methods or properties of a extended output implementation.</dd></dl>
<p>The <em>IOutput</em> interface has the following members:</p>
<ul>
<li><b>string Name { get; set; }</b><br/>
Must set or get the name of the output. If the value of the name property is changed the <em>BeforeNameChange</em> and <em>AfterNameChange</em> events have to fire. The <em>Output</em> class does implement this member (inherited from <em>NamedItemBase</em>).</li>
<li><b>event EventHandler&lt;NameChangeEventArgs&gt; BeforeNameChange</b><br/>
This event has to be fired before the value of the <em>Name</em> property gets changeds. The <em>Output</em> class is implementing this event (inherited from <em>NamedItemBase</em>).</li>
<li><b>event EventHandler&lt;NameChangeEventArgs&gt; AfterNameChanged</b><br/>
Event has to be fired after the value of the <em>Name</em> property has changed. The <em>Output</em> class is implementing this event (inherited from <em>NamedItemBase</em>).</li>
<li><b>byte Value { get; set; }</b>Property getting and setting the value of a output. A typical implementation of a output controller will use the value of this property to set the value of the physical output within its <em>Update</em> method (or updater thread). Make sure your implementation supports the whole value range (0-255) of the property (e.g. if you have a digital output supporting only on and off, map 0 to off and all other values to on).</li>
<li><b>event Output.ValueChangedEventHandler ValueChanged</b><br/>
This event has to fire if the <em>Value</em> property of the output has changed.</li>
</ul>
<h2><a class="anchor" id="outputcontrollers_implementationguideline"></a>
Implementation guidelines for custom output controllers</h2>
<ul>
<li>All output controllers must implement the <em>IOutputController</em> interface. This interface specifies some methods and properties which will allow the framework to identify and use the output controller.</li>
<li>If a output controllers uses its own output class, this class must implement the <em>IOutput</em> interface.</li>
<li>Try to inherit the <em>OutputControllerBase</em> class. This abstract class does already implement some functionality required for your own output controller class.</li>
<li>Define a globaly unique name (not only unique within its namespace) for your output controller (if the name is not unqiue loading or saving the configuration will probably fail) and put it in a subnamespace of <a class="el" href="namespace_direct_output_1_1_cab_1_1_out.html" title="DirectOutput.Cab.Out is the namespace for all output controller related classes like different output...">DirectOutput.Cab.Out</a> (e.g. DirectOutput.Cab.Out.MyOutputController).</li>
<li>Ensure that your output controller class is XMLSerializable. As a rule of thumb, your class must implement a paramaterless constructor and all settings for the effect have to be available through public read and write enabled properties. If your output controller is not XMLserializeable by default implement the <em>IXMLSerializable</em> interface to ensure that the config for the controller can be loaded and saved.</li>
<li>Be fault tolerant and handle all errors that eventually occur.</li>
<li>Keep your code as fast as possible. Updates on output controllers can occur often and slow code will slow down the whole framework.</li>
<li>Put the update logic for your output controller in a separate thread, so all time consuming calls to functions talking to the outside world are isolated from the rest of the framework (use the Init and the Finish methods to start/stop your own thread). Use the Update method only to signal the updater thread that new data is available.</li>
<li>Comment your code! At least the public methods and properties of your output controller class should be properly documented with XML comments (check the source code of DOF to see what is expected). </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 14 2013 22:46:59 for DirectOutput by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39987816-1']);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>
