<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>DirectOutput: C:/Users/Tom/Documents/GitHub/DirectOutput/Documentation/65_Output Controllers.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="directoutputstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DirectOutput_Small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DirectOutput
   </div>
   <div id="projectbrief">DirectOutput framework for virtual pinball cabinets.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('65___output_01_controllers_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/Tom/Documents/GitHub/DirectOutput/Documentation/65_Output Controllers.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="65___output_01_controllers_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;ï»¿Output controllers {#outputcontrollers}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;==================</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;\section outputcontrollers_introduction Introduction </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Output controllers are devices like the Ledwiz or maybe your own Arduino or Raspberry PI invention controlling one or several physical outputs in a cabinet.  </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;\image html OutputControllerArchitecture.png</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;By providing interfaces <span class="keywordflow">for</span> the outputcontroller itself (IOutputController) and for the outputs of a outputcontroller (IOutput) it is possible to support different output controllers. Since all outputs of output controllers have to implement _IOutput_ any configured toy can use any configured output of any output controller in the system.</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;\section outputcontrollers_builtineffects Builtin output controllers </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;Currently support for the LedWiz is built in the DirectOutput framework.</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;\section outputcontrollers_customeffects Custom output controllers </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;The DirectOutput framework allows for the implementation of custom output controllers. This can be done trough scripting (see chapter on scripting) or the classes required for a custom outputcontroller can be integrated in the DirectOutput project. </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;\subsection outputcontrollers_interfaces Interfaces for output controllers</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;\subsubsection outputcontrollers_ioutputcontroller IOutputController interface</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;All output controllers need to implement the interface _IOutputController_ to allow the DirectOutput framework to use the output controller. The IOutputController interface inherits the _INamedItem_ interface, so the members of this interface have to be implemented as well.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;A good starting point for your own implementation of a output controller is the abstract _OutputControllerBase_ class. _OutputControllerBase_ implements the _INamedItem_ interface by inheriting _NamedItemBase_ and also the _Outputs_ property of the _IOutputController_ interface. The simplest implemention of a output controller is probably the NullOutputController which is part of the framework.</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;Here is a <span class="keywordtype">short</span> explanation of the interface members of _IOutputController_:</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;- &lt;b&gt;<span class="keywordtype">string</span> Name { <span class="keyword">get</span>; <span class="keyword">set</span>; }&lt;/b&gt;&lt;br/&gt;Must <span class="keyword">set</span> or <span class="keyword">get</span> the name of the output controller. If the value of the name <span class="keyword">property</span> is changed the _BeforeNameChange_ and _AfterNameChange_ events have to fire. _OutputControllerBase_ does implement <span class="keyword">this</span> member (inherited from _NamedItemBase_).</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;- &lt;b&gt;<span class="keyword">event</span> EventHandler&lt;NameChangeEventArgs&gt; BeforeNameChange&lt;/b&gt;&lt;br/&gt;This <span class="keyword">event</span> has to be fired before the value of the _Name_ <span class="keyword">property</span> gets changeds. _OutputControlledBase_ is implementing <span class="keyword">this</span> event (inherited from _NamedItemBase_). </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;- &lt;b&gt;<span class="keyword">event</span> EventHandler&lt;NameChangeEventArgs&gt; AfterNameChanged&lt;/b&gt;&lt;br/&gt;Event has to be fired after the value of the _Name_ <span class="keyword">property</span> has changed.  _OutputControlledBase_ is implementing <span class="keyword">this</span> event (inherited from _NamedItemBase_). </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;- &lt;b&gt;OutputList Outputs { <span class="keyword">get</span>; <span class="keyword">set</span>; }&lt;/b&gt;&lt;br/&gt;This <span class="keyword">property</span> contains the list of outputs (objects implementing IOutput) of a output controllers. Property is implement in the _OutputControllerBase_ <span class="keyword">class</span>, but can be overwritten.</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;- &lt;b&gt;<span class="keywordtype">void</span> Init()&lt;/b&gt;&lt;br/&gt;Method to initialize the output controller. This is the first method which is classed on a output controller after it has been instanciated.</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;- &lt;b&gt;<span class="keywordtype">void</span> Update()&lt;/b&gt;&lt;br/&gt;This method is called by the framework after data received from the outside world (typically PinMame) has been processed or after the UpdateTime has fired, to tell the output controller to update its physical outputs. If updating the physical outputs involves some time lag (very likely it does), consider doing the actual update in a separate thread and only to use <span class="keyword">this</span> method to signal the updater thread, that data is ready.</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;- &lt;b&gt;<span class="keywordtype">void</span> Finish()&lt;/b&gt;&lt;br/&gt;Finish is the last method which is called on a output controller, before the <span class="keywordtype">object</span> gets discared. Do all necessary cleanup work in <span class="keyword">this</span> method and make sure all physical outputs are turned off.</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;Please have a look at the <span class="keyword">class </span>documentations for more information on the interface and its implementation.</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;\subsubsection outputcontrollers_ioutput IOutput interface</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;Output controllers implement the property _Outputs_ which contains a list of the outputs of the output controller. This list can contain objects implement the _IOutput_ interface.</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;The class _Output_ is a full implementation of the _IOutput_ interface and can be used directly for your output controller implementation or can be inherited to create your own extended _IOutput_ implementation (e.g. having a additional output number property).</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;\remark Since the _OutputList_ class used in the _Outputs_ property of _IOutputController_ will always return _IOutput_ objects, you might need to cast these objects into your own type, before you can access your own methods or properties of a extended output implementation.</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;The _IOutput_ interface has the following members:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;- &lt;b&gt;string Name { <span class="keyword">get</span>; <span class="keyword">set</span>; }&lt;/b&gt;&lt;br/&gt;Must <span class="keyword">set</span> or <span class="keyword">get</span> the name of the output. If the value of the name <span class="keyword">property</span> is changed the _BeforeNameChange_ and _AfterNameChange_ events have to fire. The _Output_ <span class="keyword">class </span>does implement this member (inherited from _NamedItemBase_).</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;- &lt;b&gt;event EventHandler&lt;NameChangeEventArgs&gt; BeforeNameChange&lt;/b&gt;&lt;br/&gt;This event has to be fired before the value of the _Name_ property gets changeds. The _Output_ class is implementing this event (inherited from _NamedItemBase_). </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;- &lt;b&gt;event EventHandler&lt;NameChangeEventArgs&gt; AfterNameChanged&lt;/b&gt;&lt;br/&gt;Event has to be fired after the value of the _Name_ property has changed. The _Output_ class is implementing this event (inherited from _NamedItemBase_). </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;- &lt;b&gt;byte Value { <span class="keyword">get</span>; <span class="keyword">set</span>; }&lt;/b&gt;Property getting and setting the value of a output. A typical implementation of a output controller will use the value of <span class="keyword">this</span> <span class="keyword">property</span> to <span class="keyword">set</span> the value of the physical output within its _Update_ method (or updater thread). Make sure your implementation supports the whole value range (0-255) of the property (e.g. if you have a digital output supporting only on and off, map 0 to off and all other values to on).</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;- &lt;b&gt;event Output.ValueChangedEventHandler ValueChanged&lt;/b&gt;&lt;br/&gt;This event has to fire if the _Value_ property of the output has changed.</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;\subsection outputcontrollers_implementationguideline  Implementation guidelines for custom output controllers</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;* All output controllers must implement the _IOutputController_ interface. This interface specifies some methods and properties which will allow the framerwork to use the output controller.</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;* If a output controllers uses its own output class, this class must implement the _IOutput_ interface.</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;* Try to inherit the _OutputControllerBase_ class. This abstract class does already implement some functionality required for your own output controller class.</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;* Define a unique name for your output controller (if the name is not unqiue loading or saving the configuration will probably fail) and put it in a subnamespace of DirectOutput.Cab.Out (e.g. DirectOutput.Cab.Out.MyOutputController).</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;* Ensure that your output controller class is XMLSerializable. As a rule of thumb, your class must implement a paramaterless constructor and all settings for the effect have to be available through public read and write enabled properties. If your output controller is not XMLserializeable by default implement the _IXMLSerializable_ interface to ensure that the config for the controller can be loaded and saved.</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;* Be fault tolerant and handle all errors as necessary.</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;* Keep your code as fast as possible. Updates on output controllers can occur often and slow code will slow down the whole framework. Consider putting the update logic for your output controller in a separate thread, so all time consuming calls to functions talking to the outside world are isolated from the remaing function of the framework (use the Init and the Finish methods to start/stop your own thread).  </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;* Comment your code! At least the public methods and properties of your effect should be properly documented with XML comments.</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="65___output_01_controllers_8md.html">65_Output Controllers.md</a></li>
    <li class="footer">Generated on Tue Jun 25 2013 15:50:56 for DirectOutput by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39987816-1']);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>
