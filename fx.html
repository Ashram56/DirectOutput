<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>DirectOutput: Effects/FX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="directoutputstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DirectOutput_Small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DirectOutput
   </div>
   <div id="projectbrief">DirectOutput framework for virtual pinball cabinets.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fx.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Effects/FX </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="fx_introduction"></a>
Introduction</h1>
<p>Effects are the parts which are connecting the Table and its TableElelement objects to the Toy objects in the Cabinet object. While toys are thought to be relatively stupid and just capable of doing a few simple things (e.g. set a RGB LED to a specific color), effects should do the more complex operations (e.g. dimming the color of a LED from one color to another).</p>
<p>Effects are triggered by TableElement objects (e.g. a switch or a lamp) changing its state or value and also by the Table itself when the Table is started.</p>
<p>DOF contains two types of effects:</p>
<ul>
<li><b>Toy effects</b> are effects controlling a toy. Typically they hold a reference to one or severeal toys which are controlled by the effect.</li>
<li><b>Effect effects</b> are effects which are controlling other effects. Typically effect effects are holding references to one or several target effects.</li>
</ul>
<div class="image">
<img src="EffectTypes.png" alt="EffectTypes.png"/>
<div class="caption">
Effect types</div></div>
 <h1><a class="anchor" id="fx_stacking"></a>
Stacking/chaining of effect effects</h1>
<p>Effects can be chained resp. stacked to achive more complex behaviour than the standard behaviour of effects.</p>
<p>Effect effects (effects which troger other effects) are used for chaining and any number of effects can be chained. The last effect in a chain of effects is always a toy effect which controls one or several instances of a toy objects.</p>
<p><b>Example 1</b></p>
<div class="image">
<img src="FX_Stacked1.png" alt="FX_Stacked1.png"/>
<div class="caption">
Stacked effects example 1</div></div>
<p> In this example, the first effect is a delay effect (2), which will forward the received trigger signal (1) from the table element after a specified delay. The output of the delay effect (2) triggers a first blink effect (3) which a long blink period. The output of the first blink effect (3) triggers a second blink effect (4) with a much short blink period. This will create short blinks within the long blinks of the first blink effect (3). Finnaly the output of the second blink effect (4) triggers the finaly toy effect, in this case a RGBAFadeOnOff effect (5) which will fade in and out the led depending on the received input signal (4).</p>
<p><b>Example 2</b></p>
<div class="image">
<img src="FX_Stacked2.png" alt="FX_Stacked2.png"/>
<div class="caption">
Stacked effects example 2</div></div>
<p> In the second example, a short trigger pluse from a table element (1) triggers a duration effect (2). The output of the duration effect (2) will trigger a blink effect (3). This will create blinking for the specified duration whenever the first effect in the chain receives a trigger signal. The finaly RGBAFadeOnOff effect (4) will fade in and out the color of the target toy, in this case a RGB-Led, depending on the output signal of the previous toy (3). So finnaly, we get a fading blinking for the duration specified in the second effect, whenever a trigger pluse is received by the effect chain.</p>
<h1><a class="anchor" id="fx_builtinfx"></a>
Built in effects</h1>
<p>Please read the page on <a class="el" href="fx_builtin.html">Built in Effects</a> for details and config samples on the various effect classes available in the framework.</p>
<h1><a class="anchor" id="fx_customeffects"></a>
Custom effects</h1>
<p>The <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework can easily be extended to support your own custom effects.</p>
<p>All effects must implement the _IEffect__ interface so they are recognized by DOF as effects and must have a globaly unique name (not only within the namespace).</p>
<p>There are 2 ways how new effects can be included in DOF:</p>
<ol type="1">
<li>Effects can be integrated into the source code of the framework. This is recommended for effects which can be of general use.</li>
<li>Effects can be added through scripting. Script files have to reside in the correct location (see detils on global config), so DOF can detect, compile and integrate them at runtime. This is recommended for effects which are table specific or only for your private use.</li>
</ol>
<p>Implementation wise, both options are identical, so scripted effects can easily be integrated into DOF later on if required.</p>
<h1><a class="anchor" id="fx_implementationguideline"></a>
Implementation guidelines for effects</h1>
<ul>
<li>Effects have to be coded in C# (not that difficult to learn).</li>
<li>All effects must implement the <em>IEffect</em> interface. This interface specifies some methods, properties and events which have to be implemented for every effect.</li>
<li>Try to inherit the abstract <em>EffectBase</em> class. <em>EffectBase</em> implements the necessary Name property, the change events for the name as well as the Finish method (virtual).</li>
<li>Define a globaly unique name (not only unique within its namespace) for your effect class. This name will also be used when a config file is loaded or saved. If the name is not unique loading or saving will probably fail.</li>
<li>Ensure that your effect class is XMLSerializable. As a rule of thumb, your class must implement a paramaterless constructor and all settings for the effect have to be available through public properties.</li>
<li>Put your effects into a meaningfull subnamespace of the FX namespace. If no suitable subnamespace exists, create a new subnamespace.</li>
<li>Be fault tolerant and handle all errors if necessary. In particular keep care that no exceptions are thrown, if the toy which is specified by its name in your effect is of a wrong type. If a effect throws a exception, it will get deactivated by DOF for the session.</li>
<li>If your effect needs timed events, register for the alarm function of the <em>Alarms</em> object in the <em>Pinball</em> object if possible. This will ensure that the necessary update functions are called and at the same time make sure that no unnessecary update calls to output controllers are triggered.</li>
<li>Make your code fast! In particular, resolve a references to toys and effects in the Init method.</li>
<li>Implement your own finish method, if your effect uses the <em>Alarm</em> methods of the Pinball object, to unregister all alarms that might be schedule for the effect. Finish is also a good place to get rid of all allocated resources and to unregister the effect from events it might has registered to earlier.</li>
<li>Comment your code! At least the public methods and properties of your effect should be properly documented with XML comments. The documentation of DOF is automatically generated from the comments in the source files.</li>
<li>to be continued..... </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 14 2013 22:46:59 for DirectOutput by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39987816-1']);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>
