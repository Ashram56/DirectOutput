<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>DirectOutput: ini files</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="directoutputstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DirectOutput_Small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DirectOutput
   </div>
   <div id="projectbrief">DirectOutput framework for virtual pinball cabinets.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('inifiles.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ini files </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="inifiles_introduction"></a>
Introduction</h1>
<p>The <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework supports the use of the legacy LedControl.ini files as well as the extended DirectOutputConfig.ini files as generated by the Ledwiz config tool to control the cabinet outputs. Since this framework supports the use of more than one output controller/LedWiz, the use of more than one such file can be used.</p>
<p>To facilitate the use of the framework, the auto config function will automatically load ini files and select a table config from the data based on the RomName, if no xml table config can be found. But even if a xml table config file is available is is possible to use the directoutputconfig.ini/ledcontrol.ini configs together with xml table configs by setting the right option in the xml table config.</p>
<p>If you dont have a directoutputconfig.ini file for your cabinet, it is best if you go to the <a href="http://vpuniverse.com/ledwiz/login.php" target="_blank">LedWiz ConfigTool Website</a> and create a file matching your cabinet.</p>
<p>LedControl.ini files which worked for the legacy ledcontrol.vbs solution are working in DOF too and will generally create the same effects as the ledcontrol.vbs, but you might notice some small differences since the timeing behaviour of DOF is completely different from the old solution (DOF is much, much faster).</p>
<p>section inifiles_howitworks How it works</p>
<p>Since both types of supported ini files, do only specify the effects which are to be applied on certain outputs, but contain no information on the toys to be used, the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework uses a special type of toy to map the output definitions in the ini files to outputs resp. to the connected toys. This special type of toy is called LedWizEquivalent. It is basically a list of 32 outputs, which typically all belong to the same output controller, and a number specifying a the number of the virtual output controller. If necessary it is also possible to mix outputs of several output controllers in one LedwizEquivalent toy.</p>
<p>When configurations from ini files are to be used, the framework is matching the ini files against the LedWizEquivalentToys by their numbers and uses the output definitions of the toy, to determine which outputs are to be used for which column in the ini file. For these outputs the frameworks checks next if a matching toy has already been configured for those outputs. If a matching toy does already exist, it will be used, if no toy is found DOF will automatically create a toy of a matching type (RGBAToy or AnalogaAlphaToy). These toys are then used as targets for the effects specified in the columns of the ini files.</p>
<p>Once the toy to be used have been determined the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework will setup the effects for those toys based on the settings found in the columns of the ini file. Deppending on the settings one or several effects are used to create the desired results. Please read the paragraph on <a class="el" href="inifiles.html#inifiles_settingspara">Setting parameters</a> and the page on <a class="el" href="fx.html">Effects</a> for more information.</p>
<h1><a class="anchor" id="inifiles_configloading"></a>
Configuration loading</h1>
<p>Depending on the settings in the global config file, the framework will either load the ini files specified in the global configuration or it will try to detect the ini files automatically.</p>
<p>If entries for ledcontrol files exist in the global config (see <a class="el" href="globalconfig.html">global config documentation</a>), the framework will use those files for configuration and check only these files for table settings.</p>
<p>If the global config doesn't specify any ini files, the system will go into automatic configuration mode, in which it tries to detect and load global config files automatically.</p>
<h2><a class="anchor" id="inifiles_auto"></a>
Automatic configuration</h2>
<h3><a class="anchor" id="inifiles_autolocations"></a>
File locations and names</h3>
<p>In auto config mode the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework tries to locate the files in the following locations:</p>
<ul>
<li><b>Table directory</b> as specified in the table name para when the framework is initialized.</li>
<li><b>Global config directory</b> which is usualy a subdirectory named config within the installation directory of the framework.</li>
<li><b>Installation directory</b> which is the directory containg the DirectOutput.dll.</li>
</ul>
<p>DOF will check each of these directories for ini files containing configurations. These files can have the following names:</p>
<ul>
<li><b>directoutputconfig.ini</b> resp. <b>directoutputconfig{Number}.ini</b> are the files for which the framework is looking first.</li>
<li><b>ledcontrol.ini</b> resp. <b>ledcontrol{Number}.ini</b> are the names the framework is looking for if no files named _directoutputconfig.ini__ can be found.</li>
</ul>
<p>Based on the loaded files, the system will configure the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework.</p>
<h3><a class="anchor" id="inifiles_autoconfignumbering"></a>
LedControl file numbering</h3>
<p>If auto configuration is used (typical if no table config file is available), the framework requires the ini files to match as specific naming and numbering system so they can be detected and used automatically. If more than one ini file is used, the files have to be numbered. Valid names are DirectOutputConfig.ini resp. DirectOutputConfig{Number}.ini or LedControl.ini resp. LedControl{Number}.ini. Using DirectOutputConfig.ini is the recommanded naming schema.</p>
<p>The numbers in the filenames (1 is assumed if no number exists) are used to match the files with the LedWizEquivalentToys, which are in turn used to determine the outputs resp. toys to be configured by the ini files.</p>
<p>Files having a number, which does not match any LedWizEquivalent toy are ignored in the configuration process.</p>
<h2><a class="anchor" id="inifiles_manual"></a>
Manual configuration</h2>
<p>Instead of using the automatic detection of ini files, it is also possible to specify the ini files to be used in the global configuration of the framework. Each entry for a ini file consists of the path and name of the file and a number specifying which LedWizEquivalent toy should be configured by the ini file.</p>
<p>If at least one ini file is specifiy in the global config, the framework will no do any automatic ini file detection.</p>
<p>For ini files specified in the global config any filename can be used. The restriction on filesnames which exists for automatic config does not exist here.</p>
<h1><a class="anchor" id="inifiles_cabinetconfig"></a>
Cabinet configuration</h1>
<p>The <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework is not capable of doing anything without a cabinet config. For detailed information on this topic please read the page on <a class="el" href="cabinetconfig.html">Cabinet Configuration</a>, since the following paragraphs only contain a few details which are relevant when it come to config through ini files.</p>
<h2><a class="anchor" id="inifiles_autocabinetconfig"></a>
Automatic cabinet configuration</h2>
<p>A cabinet config file can contain any number of LedWizEquivalent toys to control any number of output controllers. If cabinet auto configuration is used, the framework will automatically generate LedWizEquivalent toys for the output controllers which are automatically detected.</p>
<p>If active (typically if no cabinet config file exists), automatic cabinet configuration numbers the detected and created output controllers resp. their related LedWizEquivalent toys as follows:</p>
<ul>
<li>For LedWiz unit 1-16, the framework creates one LedWizEquivalent per unit having the same number as the LedWiz (LedWiz nr. = LedWizEquivalent nr. = ini file number).</li>
<li>For PacLed64 units (max 4 supported), the framework creates 2 LedWizEquivalentToys per unit to cover all 64 outputs. The numbering for those LedWizEquivalent starts at 20, so PacLed64 id 1 can be accessed through LedWizEquivalents numbered 20 &amp; 21, PacLed id 2 uses 22 &amp; 23 and so on.</li>
</ul>
<h2><a class="anchor" id="inifiles_manualcabinetconfig"></a>
Manual cabinet configuration</h2>
<p>Instead of relying on the automatic cabinet configuration, you can also specifiy your own cabinet config for the use with ini files.</p>
<p>To be usable for the ini file configration system of the framework, the list of toys in the cabinet must contain one or several LedWizEquivalent toy objects. Normaly the outputs of a LedWizEquivalent toys will point to the outputs of a single output controller, but you are free to point them to any other output of any output controller configured in your system (e.g. you could use outputs of 2 different LedWiz controllers in one LedWizEquivalent toy).</p>
<p>When ini file data is used for the Table configuration, the number of the LedWizEquivalent toy is used to match to the correct ini file.</p>
<p>If a cabinet config file exists, the framework normally no do any automatic detection of output controllers and will no create any LedWizEquivalent toys automatically.</p>
<h1><a class="anchor" id="inifiles_settings"></a>
Settings in DirectOutputConfig/LedControl ini files</h1>
<p>The content opf the ini files is a bit hard to read and understand. The following paragraphs try to explain the most importants points.</p>
<p>The ini files are also quite hard to edit manually. Therefore the best option to get your own settings, is to use the <a href="http://vpuniverse.com/ledwiz/login.php" target="_blank">LedWiz ConfigTool Website</a>. If you create your own settings, it is highly recommended that you use the <a class="el" href="inifiles.html#inifiles_testingapp">LedControlFileTester.exe</a> to check if your files can be parsed.</p>
<div class="image">
<img src="LedWizConfigTool.jpg" alt="LedWizConfigTool.jpg"/>
<div class="caption">
LedWiz ConfigTool </div></div>
<h2><a class="anchor" id="inifiles_settingscolors"></a>
Colors Section</h2>
<p>The first section in a directoutputconfig.ini file is the Colors section. It starts with the header [Colors_DOF] and a empty line following the header. After the header one or several colors are specified by a name and the brighness of 3 color components (red, green, blue) or 4 color components (red, green, blue, alpha). The values of the components have a range of 0 (off resp. fully transparent for alpha) to 48 (max brightness resp. fully opaque for alpha). For color specifications without a alpha component, alpha will be set to 0 (transparent) if all components are set to 0 (resulting in black). All other definitions will have a alpha value of 255 (fully opaque).</p>
<p>A colors section might looks as follows: </p>
<div class="fragment"><div class="line">[Colors DOF]</div>
<div class="line"></div>
<div class="line">Black=0,0,0</div>
<div class="line">White=48,48,48,48</div>
<div class="line">Red=48,0,0,255</div>
<div class="line">SemitransparentRed=48,0,0,24</div>
<div class="line">.. more color definitions ....</div>
<div class="line">Brown=24,12,0</div>
</div><!-- fragment --><h2><a class="anchor" id="inifiles_settingsconfigouts"></a>
Config DOF Section</h2>
<p>The most important section in a directoutputconfig.ini file is the [Config DOF] section. It contains the effect definitions for the various tables.</p>
<p>Each line in this section contains the definition for a single table. The lines start with a short version of the romname of the table or a fake romname for EM tables. After the romname, there can be up to 32 columns (separated by commas) containing the settings for every output of a ledwiz resp. the internal representation of a ledwiz (Column 1 is output 1, column 2 is output 2 and so on).</p>
<p>Every column can contain any number of definitions how the framework should control the output. If more than one definition exists for a column, these definitions have to be separated by forward dashes (/).</p>
<p>The following definitions can be used to specifiy the output behaviour of the physical outputs. Definitions can consist of up to three parts each containing one setting separated by a space.</p>
<div class="image">
<img src="LedWizConfigTool.jpg" alt="LedWizConfigTool.jpg"/>
<div class="caption">
LedWiz ConfigTool </div></div>
<p>The config section of a ini file might looks like this: </p>
<div class="fragment"><div class="line">[Config DOF]</div>
<div class="line"></div>
<div class="line">abv106,S6/S7 60/S48,S4,S8/S11/W58 60/W59 60/W60 60/W61 60,S13,0,S1/S2/S46,S5/S12 60,0,S15/S16/S31 60/S32/W51 60/W52 60/W53 60,S14/S17 60/S30,S3,ON,ON,L34,W27 Blink,L3,S6 Yellow/S20 Yellow,S4 White/S14 Red/S21 Red/S22 Green/S27 Red/S28 Red/W62 Green/W65 Yellow/W66 Yellow/W69 Yellow,S1 Blue/S13 Red/W41 Yellow/W42 Yellow/W43 Yellow/W70 Yellow,S5 White/S15 Red/S24 Yellow/S25 Green/S27 Red/W54 White/W71 Yellow,S23 Yellow/S26 Yellow/W49 White/W50 White,0</div>
<div class="line">afm,S48,S9,0,0,S3/S11,S1/S2/S46,S10,0,S4/S13,S12/S16,S7,ON,ON,0,L86,L88,S27 Red/S11 Red/S28 Green/W56 Green/W57 Green/W58 Green,S9 Blue/S25 Red/S26 Red/W43 Green,S12 Red/S21 Red/S23 Green,S10 Blue/S17 Red/S18 Red/S22 Yellow/W38 Yellow/W44 Green,S19 Red/S13 Red/S20 Green/W41 Green/W42 Green/W48 Yellow,S5 600 I32/S6 600 I32/S8 600 I32/S14 600 I32/S15 600 I32</div>
<div class="line">... more table configs ...</div>
<div class="line">atlantis,S48,S7,0,S2/S9/W1 60/W2 60/W3 60/W4 60,S4/S11,S12/S14/S46,S8,0,S1/S5,S6,S15,ON,ON,0,W16 Blink,ON,S4 Red/W25 Red/W26 White/W27 Yellow/L43 Orange,S7 Yellow/W32 Blue/L77 White,S6 Red/W12 White/W33 Red/W34 White/W35 Yellow/L45 Red,S8 Yellow/W36 Cyan/L62 White,S5 Red/W13 White/W28 Red/W29 White/W30 Yellow/W45 Blue/L76 Orange,0</div>
</div><!-- fragment --><h2><a class="anchor" id="inifiles_settingspara"></a>
Setting examples</h2>
<p>The first part of a setting for a column must always be one of the following:</p>
<ul>
<li><b>TableElementTypeChar plus Number</b> (e.g. S48 for solenoid 48) determines which table element is controlling the specified effect.</li>
<li><b>On</b> resp. <b>1</b> turns the specified effect constantly on.</li>
<li><b>B</b> defines a static (not externaly controlled) blinking.</li>
</ul>
<p>The second and following parts can contain the following:</p>
<ul>
<li><b>Color name</b> as specified in the colors section of the file. Only valid as the second value.</li>
<li><b>Hex color definition</b> (e.g. #ff0000ff for opaque red). Take note that these color definitions allow for values from 0-255 in contrast to the colors section which only support 0-48. Hex color definitions can contain 3 or 4 parts (without or with alpha value). Setting is only accepted as the second value.</li>
<li><b>Blink</b> defines blinking with a default interval of 500ms.</li>
<li><b>I{Number}</b> defines a intensity between 0 (off) and 48 (fully on) for the effect. This settings is only valid for effect settings without a color definition and controlling only a single output.</li>
<li><b>L{Number}</b> defines the layer on which the setting operates. In most cases the setting is not required, since DOF will assign ascending layer numbers to the settings for a column anyway.</li>
<li><b>W{NumberOfMilliseconds}</b> defines a wait period resp. delay before the effect executes after it has been triggered.</li>
<li><b>M{NumberOfMilliseconds}</b> defines the minimum duration for the effect in milliseconds.</li>
<li><b>F{NumberOfMilliseconds}, FU{NumberOfMilliseconds}, FD{NumberOfMilliseconds}</b> are used to specify the fading duration in milliseconds. <em>F</em> sets the duration for both fading up and down, <em>FU</em> controls fading up anly and <em>FD</em> fading down only.</li>
<li><b>Numeric Values</b> without any extra character can be used to specify the duration of the effect or the blinking behaviour. If blinking has been defined, one or two numeric values are parsed. Value 1 controls the blink interval in milliseconds, while value 2 defines the number of blinks. If no blinking has been defined, only one numeric values which is used to defined the duration of the effect in milliseconds is parsed.</li>
</ul>
<h2><a class="anchor" id="inifiles_settingspara"></a>
Setting examples</h2>
<ul>
<li><b>S48</b> will turn the toy associated with the column on and off depending on the state of solenoid 48.</li>
<li><b>S48 Green</b> will set the rgb led associated with the column of the file to green depending on the state of solenoid 48.</li>
<li><b>S48 Green Blink</b> will set the rgb led associated with the column of the file to green blinking depending on the state of solenoid 48.</li>
<li><b>W32 Red Blink 500 5</b> will make a rgbled blink red for 5 times with a interval of 500ms when switch 32 is activated.</li>
<li><b>W32 Red Blink 250 5 F200</b> same result as previous example but the color will fadin and out in 200 millieconds.</li>
<li><b>W36 I32</b> sets the output associated with the column to intensity 32 as long as switch 32 is active.</li>
</ul>
<h1><a class="anchor" id="inifiles_testingapp"></a>
LedControl File Testing Application</h1>
<p>The package of the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework does also contain a small tool named <em>LedControlFileTester.exe</em> which can be used to test wether the contents of a directouput.ini resp. ledcontrol.ini file can be read and understood be the <a class="el" href="namespace_direct_output.html">DirectOutput</a> framework.</p>
<p>The tool can by started directly with a double click like any other program, but it can also be used from the command line.</p>
<p>For command line usem you have to specify a single parameter with the name and path to your config file:</p>
<div class="fragment"><div class="line">LedControlFileTester.exe DirectOutputConfig.ini</div>
</div><!-- fragment --><p>If the file is OK, the tool will output a small notification message in the command window. If there are problems in the ledcontrol file, the tool will open a window where you can see the messages returned by the ledcontrol file parser.</p>
<div class="image">
<img src="LedControlFileTester.jpg" alt="LedControlFileTester.jpg"/>
<div class="caption">
Test results showing a problem in a config file.</div></div>
<dl class="section warning"><dt>Warning</dt><dd>This tool does only check if the basic structure of the file is correct and wether all settings can be parsed. It does NOT check if settings make sense (e.g. if a settings exists for a non existing table element). </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Nov 1 2013 11:21:46 for DirectOutput by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39987816-1']);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>
